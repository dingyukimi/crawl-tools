#include <cstdio>
#include <cstring>
#include <cmath>
#include <vector>
#include <iostream>
#include <algorithm>
using namespace std;
#define LL long long
const int mod=10000;
int main()
{
    int p,n,tt=0;
    while(scanf("%d%d",&p,&n)!=EOF)
    {
        if(p==0&&n==0)
            break;
        int ans=1;
        while(n)
        {
            ans*=(n%p+1);
            n/=p;
            if(ans>=mod)
                ans%=mod;
        }
        printf("Case %d: %04d\n",++tt,ans);//â(ai+1) (0=<i<=k)
    }
    return 0;
}
/*
    ä¸å¼å§å°±è¢«åå°äºï¼çäºç½ä¹¦ä¸çä¸­æç¿»è¯ï¼ä¸é¢è¯´çæ¯è½è¢«pæ´é¤çæå¤å°ä¸ªï¼å¼çææä¹ä¹æ²¡çè§£Lucaså®ççè¯´æï¼555555
    
    Lucaså®çï¼
    AãBæ¯éè´æ´æ°ï¼pæ¯è´¨æ°ãABåæpè¿å¶ï¼A=a[n]a[n-1]...a[0]ï¼B=b[n]b[n-1]...b[0]ã
    åç»åæ°C(A,B)ä¸C(a[n],b[n])*C(a[n-1],b[n-1])*...*C(a[0],b[0])  mod påä½
    å³ï¼Lucas(n,m,p)=c(n%p,m%p)*Lucas(n/p,m/p,p)ï¼å¨å­å¨iï¼b[i]>a[i]æ¶ï¼modå¼ä¸º0ï¼æä»¥å¿å®æ´é¤ï¼å½å¯¹äºææiï¼b[i]<=a[i]æ¶ï¼a[i]!%p!=0,æä»¥å¿å®ä¸è½æ´é¤ 
    
    çå°ä¸å¤§ç¥çè¯æï¼æè§å¾å¾ä¸éï¼
//éç¹ï¼
        é®é¢é®C[n,i](0=<i<=n)ä¸­æå¤å°ä¸ªä¸è½è¢«pæ´é¤çã
    åæ2ï¼
          æä»¬ç¥éå¯¹äºç´ æ°pï¼nï¼ä¸­pçå¹æ¬¡ä¸º
          f[n!,p]=[n/p]+[n/p^2]+[n/p^3]â¦â¦
          
          é£ä¹C[n,m]ä¸­pçå¹æ¬¡ä¸º
          f[c[n,m],p]=f[n,p]-f[n-m,p]-f[m,p]
          
          c[n,m]ä¸è½è¢«pæ´é¤ï¼æå³çf[n,p]=f[n-m,p]+f[m,p]
          äºæ¯ [n/p^i]=[(n-m)/p^i]+[m/p^i]å¯¹ä»»æiæç«
          
    è®¾nçpè¿å¶è¡¨ç¤ºä¸º(akâ¦â¦,a0)
          è®¾n-mçpè¿å¶è¡¨ç¤ºä¸º(bkâ¦â¦,b0)
          è®¾mçpè¿å¶è¡¨ç¤ºä¸º(ckâ¦â¦,c0)
          
    [n/p^k]=ak=[(n-m)/p^k]+[m/p^k]=bk+ck                                                        =>ak=bk+ck
          [n/p^(k-1)]=(aka(k-1))=[(n-m)/p^(k-1)]+[m/p^(k-1)]=(bkb(k-1))+(ck(ck-1))   =>a(k-1)=b(k-1)+c(k-1)
         â¦â¦
         æä»¬å¯ä»¥å¾å°ai=bi+ci(0<=i<=k)è¿æ¯ååæ¡ä»¶ãè¿éè¯´æä¸ï¼å¯ä»¥æä¸¾cï¼å¯¹äºciï¼è¦ä¿è¯ç­å¼æç«ï¼0<=ci<=ai,å±ai+1ä¸ªï¼æä»¥ç»ææ¯
         â(ai+1)ï¼ç¬¦åè¿æ ·æ¡ä»¶çmå¿å®å°äºn(çä¸ä¸å°±ç¥éäº);å½ci>aiæ¶ï¼å°±ä¸è½å­å¨bi>=0ä½¿ç­å¼æç«
        
         å³å½0=<bi<=aiæ¶å¯¹ä»»æiæç«æ¶ f[n,p]=f[n-m,p]+f[m,p]ï¼å³pä¸æ´é¤c[n,m]
        
         æä»¥c[n,m]ä¸è¢«pæ´é¤çæ°æ â(ai+1) (0=<i<=k)ä¸ªã
    
    åæ2:
         ä¹¦ä¸ä¾é¢
         è®¾pä¸ºè´¨æ°ï¼aï¼bä¸ºä¸¤æ­£æ´æ°ï¼ä¸a,bå¨pè¿å¶ä¸è¡¨ç¤ºä¸º a=(akâ¦â¦,a0),b=(bkâ¦â¦,b0) 0=<ai,bi<p
    è¯æ c[a,b]=c[ak,bk]*â¦â¦*c[a0,b0](mod p)
          è¯ï¼
               pä¸ºè´¨æ°æ¶æè¯ (1+x)^p=1+x^p(mod p)
               (1+x)^a=(1+x)^(ak*p^k)â¦â¦(1+x)^(a0) ï¼mod pï¼
                          =(1+x^(p^k))^akâ¦â¦(1+x)^a0ï¼mod pï¼ ï¼1ï¼
               x^bå¨ï¼1ï¼å³è¾¹å¼å­çç³»æ°ä¸ºc[ak,bk]*â¦â¦*c[a0,b0]ã
              ä»èçè¯ c[a,b]=c[ak,bk]*â¦â¦*c[a0,b0](mod p)
          
         æ ¹æ®è¿ä¸ªç»è®º æä»¬å¯ç¥c[a,b]=0(mod p) å½ä¸ä»å½ å­å¨bi>ai
         
         æä»¥c[n,m]ä¸è¢«pæ´é¤çæ°æ TT(ai+1) (0=<i<=k)ä¸ªã
*/